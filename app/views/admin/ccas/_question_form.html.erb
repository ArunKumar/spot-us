<% content_for :head do %>
	<script>
		$(function(){
			$(".admin_tab").removeClass("hilited");
			$("#ccas_tab").addClass("hilited");
		});
		function setSection(section){
			$('#section_field').val(section);
		}
		function toggleAdditionalQuestionData(){
			selected_text = $('#question_type:selected').text();
			if(selected_text.indexOf("text")<0 && $('#additional_question_data').is(":hidden")){
				$('#additional_question_data').slideToggle('slow');
			} else if ($('#additional_question_data').is(":visible")) {
				$('#additional_question_data').slideUp('slow');
			}
		}
	</script>
<% end %>
<% form_for([:admin, @cca_question], :html => { :multipart => true ,:id => "question_form"}) do |f| %>
	<%= f.hidden_field :cca_id, :value => @cca.id %>
	<div class="row">
		<%= f.label     :question, "Question Title" %>
		<%= f.text_field :question %>
	</div>
	<div class="row">
		<%= f.label     :question_type, "Type" %>
		<%= f.select(:question_type, CcaQuestion.QUESTION_TYPES.collect {|q| [q.sub("_", " "),q]}, {}, {:onclick=>'toggleAdditionalQuestionData();', :id=>"question_type"}) %>
	</div>
	<div class="row">
		<%= f.label     :description, "Short Description " %>
		<%= f.text_field :description %><br/>
		<em class="small">Optional. Goes below question title.</em>
	</div>
	<div class="row" id="additional_question_data" style="display:none;">
		<%= f.label     :question_data, "Radio Button Elements (only for radio button type)" %>
		<em  class="small">One element per line.</em><br/>
		<%#= f.text_area :question_data, :style => "height:80px" %>
		<textarea name="cca_question[question_data]" style="width:260px;height:140px"><%=@cca_question.question_data.gsub("\n", "") if @cca_question.question_data %></textarea>
		<br/>    
	</div>
	<div class="row">
      <%= f.label     :section, "Section" %>
      <%= f.text_field :section %><br/>
      <em class="small">Optional. Each question in the same section will be grouped visually.</em>
		<%unless @cca.sections.empty?%>
			<br/>
			Already specified sections: <%=section_links(@cca.sections)%>
		<%end%>
	</div>
	<div class="row">
		<%= f.label     :required, "Required? " %>
		<%= f.check_box :required %>
		<em>Make the question a required element.</em>
	</div>
	<div class="row">
		<%= f.label     :position, "Sort Position " %>
		<%= f.text_field :position, :style => "width:40px", :value=>(@cca.cca_questions.empty? ? "0" : @cca.cca_questions.count) %>
		<em class="small">Sort order.</em>
	</div>
	<%= image_submit_tag image_path('save.png') %>
<% end %>